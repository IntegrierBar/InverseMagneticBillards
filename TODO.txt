--------------------------------------------------------------------------------------------------------------------
TODO:
--------------------------------------------------------------------------------------------------------------------

Spawn trajectory batches muss noch die farben der trajektorien setzen, so dass man sie unterscheiden kann  
(Hab ich versucht aber verschiedene Farben die gut sichtbar sind ist schwierig)
Man kann außerdem überlegen ob man eine bessere startposition verteilung versucht zu implementieren, da aktuell
nur Quadratzahlen gespawnt werden können und das bei Rechtecken auch sehr unregelmäßig ist 

Überprüfe immer state um nicht in einen illegalen Zustand zu kommen!
Beispielbugs: 
- Wenn es keine Trajektorien gibt und man ein neues Polygon erstellt stürzt das Programm nach dem schließen des 
Polygons ab  X
- Löschen von trajektorien im set start state und set direction state führt zum absturz des Programms
- Dürfen Trajektorien hinzugefügt werden, bevor das Polygon geschlossen wurde? Sorgt aktuell für offene Polygone

Anleitung schreiben

(FlowMap und Phasespace kamera bekommen limits für rechts und links bewegung, damit man nicht mehr sieht als die 
Bilder)

ÜBERPRÜFEN, DASS SHADER RICHTIG SIND!!!!!!!!!!!!!!!!!!

Koordinaten von Startposition/richtung und polygon muss über textfeld eingebbar sein:
- Start und Richtung von Trajektorien die über den Phasespace gespawnt werden werden nicht in die Textfelder
  geschrieben
- Soll Reihenfolge veränderbar sein? (eher nicht erstmal)
- Sollen zusätzliche Vertices hinzufügbar sein? 
- Gezeichnete initial Linie bleibt bestehen wenn Trajektorien aus der Flowmap nur geshowed werden. Das sollte nicht
  so sein, aber wie lässt es sich fixen? passiert auch wenn vertices verschoben werden 
- Soll die geschriebene Startposition sich ebenfalls ändern wenn sich die Koordinaten der Polygons Vertices verändern?

Koordinatensystem in den Hintergrund des normal Spaces legen, ein- und ausschaltbar

Button in Flowmap control der aktuell angezeigt trajectorie als normale Trajektorie spawnt

Sollen wir uns optisch noch mehr Mühe machen? Oder lassen wir es so? Soll ich die Font wieder entfernen oder 
überall hinzufügen? 

Füge nützliche tooltips zu buttons und textfeldern hinzu um die Bedienung zu erleichtern, damit könnten dann auch
die Instruction labels entfernt werden, denke ich


--------------------------------------------------------------------------------------------------------------------
erledigt:
--------------------------------------------------------------------------------------------------------------------


FTLE: 
4 trajectorien starten, Jacobimatrix damit berechnen, spektralnorm nehmen und als Helligkeit verwenden
Abstand der trajectorien mit zoom faktor ändern

Außerdem einfügen eines kleinen Bildes mit Flowmap von 0 Iterationen
 -> nutze if n=0 in shader und bedenke das auch zu setzen, wenn POlygon gelöscht wird

Soll das reguläre n-Eck auch Ecken bekommen die verschiebbar sind? Das ist aktuell nämlich nicht der Fall X

Farbänderung von trajecotrie in normal control sollte auhc farbe in Phasespace ändern

Phasespace nochmal überdenken, ob das nicht besser geht (mit kleinen kreisen oder so zum Beispiel statt resterisierung)

Trajectory drawn in normal space hat aktuell keine Funktion, soll das noch angebunden oder eher entfernt werden?

Reset all trajectories button, in normal control, löscht alles aus trajektorien außer startpunkt und startrichtung, 
sollte phasespace ebenfalls entsprechend zurücksetzen
BUG: Behält Startpunkte aber nicht Richtungen bei! Problem ist, dass die direction anders berechnet werden muss! X

Clear phasespace entfernt Trajektorien aus dem normal space nicht, soll das so bleiben??

Delete trajectories sollte Trajektorien auch aus dem phasespace entfernen (ich weiß nicht ob das geht)

Überprüfen, dass Flowmap und Phasespace gleich orientiert sind X

Knöpfe und Verbindung für regelmäßiges n-eckiges Polygon einfügen
-> Code zur Erstellung des n-Ecks nach Godot kopieren

Auf Github zum laufen bekommen (scheint zu tun, bitte testen)

Project resizeable machen (bekomme Größe zum Beispiel über Browser mitgeteilt) (scheint zu tun, bitte testen)

Bei show trajectory aus der flowmap sollte vorwärts/rückwärts beachtet und unterstützt werden X

Inwieweit soll die Orientierung des Polygons für den Phasespace und die Flowmap beachtet werden? X (Gar nicht extra behandeln)

Polygon Vertices können verschoben werden, flowmap soll interaktiv berechnet werden dabei
Notizen: Wenn ich es richtig sehe, müssen wir dafür Objekte für die Eckpunkte erzeugen die mit den Clicks gespawnt 
werden und dann draggable sind X

was noch connected werden muss:
reset_image in Phasespace mit eigenem button, new polygon, change radius  X

Flowmap muss ordentlich gemacht werden (an radius anbinden) X
Bild ändern vielleicht?

Phasespace trajectory on click muss pixel gesetzt werden  X
Note: Trajektorien, die über Phasespace control hinzugefügt werden, bekommen ihre Startcoordinaten in den 
phasespace gemalt, Trajektorien die über die normale control hinzugefügt werden, bekommen ihre Startkoordinaten
NICHT in den phasespace gemalt, erst nach einer Iteration tauchen sie im phasespace auf!

Startpunkt der Trajektorien die über den normal Space gespawnt werden muss in den phasespace eingefügt werden  X

Füge remove all trajectories button hinzu X

Flowmap control 
- Anzahl Iterationen X
- Vorwärts/Rückwärts X (ich weiß nicht ob die rückwärtsiteration richtig aussieht)
- Nur Position, nur Winkel, beides X
- Zeige Ableitung (ftle) X
- Soll hide/show verwenden X

additional Slider für radius   X
Problem: Eingabe von zweistelligen Zahlen ist sehr anstrengend aktuell, das muss gefixt werden -> fixed   X

Soll der Button an einen anderen Ort? Zum Beispiel ganz nach oben, bedenke dass die Position der Knöpfe wichtig für
das spawnen und entfernen von Trajektorien ist, sollte der Knopf verschoben werden, muss das angepasst werden!
"Add new trajectory", "delete all trajectories" und "open flow map control" müssen über die trajectorien.  X

Bug mit Flowmapcontrollfenster fixen (im zweifel per ready funktion) X

Beim Trajektorien erstellen im Phasespace wird bei spawn on click nicht überprüft dass die lokalen Variablen im 
zulässigen Bereich sind, das sollte gefixt werden!  X

Flowmap bei(während) click zeigt Trajectorie in normalem Polygon an  X
(das ist glaube ich wichtig, wir müssen überprüfen ob die Flowmapberechnungen passen!)

Aus Flowmap trajectorien spawnen und nur anzeigen (Button entscheidet was davon passiert bei linker Maustaste 
klick/press)  X

Bei show trajectory wird der radius aktuell nicht berücksichtigt, das muss korrigiert werden!  X

Koordinaten von Startposition/Richtung muss über Text Feld eingebbar sein (funktioniert soweit würde ich sagen)  X

Koordinaten von Startposition/richtung und polygon muss über textfeld eingebbar sein:
- überprüfe das eingegebene Koordinaten für start und richtung zu phasespace passen  X
- Polygon vertices brauchen Text felder, vermutlich als eigenes Fenster  X
- Zeige Koordinaten der Vertices an   X
- Koodinaten veränderbar über veränderung der Textfelder   X